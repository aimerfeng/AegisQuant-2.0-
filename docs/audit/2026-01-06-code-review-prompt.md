# Titan-Quant ä»£ç å®¡æŸ¥æç¤ºè¯

## ä½¿ç”¨è¯´æ˜
å°†ä»¥ä¸‹æç¤ºè¯å¤åˆ¶åˆ°æ–°çš„å¯¹è¯ä¸­ï¼Œç”¨äºå…¨é¢æ£€æŸ¥å½“å‰ä»£ç åº“çš„è´¨é‡å’Œé—®é¢˜ã€‚

---

## ä»£ç å®¡æŸ¥æç¤ºè¯

```
è¯·å¯¹ Titan-Quant é‡åŒ–å›æµ‹ç³»ç»Ÿè¿›è¡Œå…¨é¢çš„ä»£ç å®¡æŸ¥ã€‚è¿™æ˜¯ä¸€ä¸ª Python åç«¯ + Electron/React å‰ç«¯çš„é¡¹ç›®ã€‚

### å®¡æŸ¥èŒƒå›´

1. **åç«¯ Python ä»£ç ** (core/, utils/, tests/)
   - æ£€æŸ¥ç±»å‹æ³¨è§£å®Œæ•´æ€§
   - æ£€æŸ¥å¼‚å¸¸å¤„ç†æ˜¯å¦å®Œå–„
   - æ£€æŸ¥ Decimal ç²¾åº¦æ˜¯å¦æ­£ç¡®ä½¿ç”¨
   - æ£€æŸ¥çº¿ç¨‹å®‰å…¨æ€§
   - æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡

2. **å‰ç«¯ TypeScript/React ä»£ç ** (ui/src/)
   - æ£€æŸ¥ TypeScript ç±»å‹é”™è¯¯
   - æ£€æŸ¥ React ç»„ä»¶æœ€ä½³å®è·µ
   - æ£€æŸ¥ Zustand store è®¾è®¡
   - æ£€æŸ¥ i18n ç¿»è¯‘å®Œæ•´æ€§
   - æ£€æŸ¥ CSS æ ·å¼ä¸€è‡´æ€§

3. **é…ç½®æ–‡ä»¶**
   - æ£€æŸ¥ package.json ä¾èµ–ç‰ˆæœ¬
   - æ£€æŸ¥ tsconfig.json é…ç½®
   - æ£€æŸ¥ webpack é…ç½®

### å·²çŸ¥é—®é¢˜æ¸…å•

è¯·æ£€æŸ¥ä»¥ä¸‹å·²çŸ¥é—®é¢˜æ˜¯å¦å·²ä¿®å¤ï¼š

1. **layoutStore.ts ç±»å‹é”™è¯¯** (å·²ä¿®å¤)
   - Golden-Layout header é…ç½®ç±»å‹ä¸åŒ¹é…
   - `substr` å¼ƒç”¨è­¦å‘Š

2. **å‰ç«¯ç»„ä»¶çŠ¶æ€åŒæ­¥**
   - backtestStore å’Œ strategyStore æ˜¯å¦æ­£ç¡®ä¸ WebSocket æœåŠ¡é›†æˆ
   - ç»„ä»¶æ˜¯å¦æ­£ç¡®è®¢é˜… store çŠ¶æ€

3. **æµ‹è¯•è¦†ç›–**
   - å‰ç«¯ç»„ä»¶æ˜¯å¦æœ‰è¶³å¤Ÿçš„æµ‹è¯•
   - å±æ€§æµ‹è¯• (PBT) æ˜¯å¦å…¨éƒ¨é€šè¿‡

### è¾“å‡ºæ ¼å¼

è¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡ºå®¡æŸ¥ç»“æœï¼š

#### ğŸ”´ Critical (é˜»å¡æ€§é—®é¢˜)
- é—®é¢˜æè¿°
- æ–‡ä»¶ä½ç½®
- å»ºè®®ä¿®å¤æ–¹æ¡ˆ

#### ğŸŸ¡ Medium (æŠ€æœ¯å€ºåŠ¡)
- é—®é¢˜æè¿°
- æ–‡ä»¶ä½ç½®
- å»ºè®®ä¿®å¤æ–¹æ¡ˆ

#### ğŸŸ¢ Minor (å»ºè®®æ”¹è¿›)
- é—®é¢˜æè¿°
- æ–‡ä»¶ä½ç½®
- å»ºè®®ä¿®å¤æ–¹æ¡ˆ

#### âœ… è‰¯å¥½å®è·µ
- å€¼å¾—ä¿ç•™çš„è®¾è®¡å†³ç­–
- ä»£ç è´¨é‡äº®ç‚¹

### ç‰¹åˆ«å…³æ³¨

1. **é‡‘èè®¡ç®—ç²¾åº¦**: æ‰€æœ‰ä»·æ ¼/æ•°é‡è®¡ç®—æ˜¯å¦ä½¿ç”¨ Decimal
2. **äº‹ä»¶ç¡®å®šæ€§**: EventBus æ˜¯å¦ä¿è¯äº‹ä»¶é¡ºåº
3. **çŠ¶æ€ä¸€è‡´æ€§**: å¿«ç…§æ¢å¤åçŠ¶æ€æ˜¯å¦å®Œæ•´
4. **å®‰å…¨æ€§**: æ•æ„Ÿæ•°æ®æ˜¯å¦åŠ å¯†å­˜å‚¨
5. **å›½é™…åŒ–**: æ‰€æœ‰ç”¨æˆ·å¯è§æ–‡æœ¬æ˜¯å¦æ”¯æŒ i18n
```

---

## å¿«é€Ÿæ£€æŸ¥å‘½ä»¤

### åç«¯æµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰ Python æµ‹è¯•
pytest tests/ -v

# è¿è¡Œå±æ€§æµ‹è¯•
pytest tests/ -v -k "property"

# æ£€æŸ¥ç±»å‹
mypy core/ utils/ --ignore-missing-imports
```

### å‰ç«¯æ£€æŸ¥
```bash
cd ui

# å®‰è£…ä¾èµ–
npm install

# TypeScript ç±»å‹æ£€æŸ¥
npx tsc --noEmit

# ESLint æ£€æŸ¥
npm run lint

# è¿è¡Œæµ‹è¯•
npm test
```

### Git çŠ¶æ€
```bash
# æŸ¥çœ‹æœªæäº¤çš„æ›´æ”¹
git status

# æŸ¥çœ‹æœ€è¿‘æäº¤
git log --oneline -10
```

---

## å½“å‰å·²çŸ¥ TypeScript é”™è¯¯

### ui/src/renderer/stores/layoutStore.ts
- âœ… å·²ä¿®å¤: `substr` æ”¹ä¸º `substring`
- âœ… å·²ä¿®å¤: header é…ç½®ç®€åŒ–

### å…¶ä»–æ½œåœ¨é—®é¢˜
- æ£€æŸ¥ `golden-layout` ç±»å‹å®šä¹‰æ˜¯å¦ä¸å®é™… API åŒ¹é…
- æ£€æŸ¥ `lightweight-charts` ç±»å‹å®šä¹‰æ˜¯å¦å®Œæ•´
- æ£€æŸ¥ `monaco-editor` é›†æˆæ˜¯å¦æ­£ç¡®

---

## é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```
titan-quant/
â”œâ”€â”€ core/                    # åç«¯æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ engine/              # å›æµ‹å¼•æ“
â”‚   â”‚   â”œâ”€â”€ event.py         # äº‹ä»¶å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ event_bus.py     # äº‹ä»¶æ€»çº¿
â”‚   â”‚   â”œâ”€â”€ matching.py      # æ’®åˆå¼•æ“
â”‚   â”‚   â”œâ”€â”€ replay.py        # å›æ”¾æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ risk.py          # é£æ§æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ snapshot.py      # å¿«ç…§ç®¡ç†
â”‚   â”‚   â””â”€â”€ types.py         # æ•°æ®ç±»å‹
â”‚   â”œâ”€â”€ data/                # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ importer.py      # æ•°æ®å¯¼å…¥
â”‚   â”‚   â”œâ”€â”€ cleaner.py       # æ•°æ®æ¸…æ´—
â”‚   â”‚   â”œâ”€â”€ storage.py       # Parquet å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ repository.py    # æ•°æ®åº“è®¿é—®
â”‚   â”‚   â””â”€â”€ providers/       # æ•°æ®æºæ’ä»¶
â”‚   â”œâ”€â”€ strategies/          # ç­–ç•¥ç®¡ç†
â”‚   â”œâ”€â”€ server.py            # WebSocket æœåŠ¡
â”‚   â”œâ”€â”€ handlers.py          # æ¶ˆæ¯å¤„ç†å™¨
â”‚   â””â”€â”€ exceptions.py        # å¼‚å¸¸å®šä¹‰
â”œâ”€â”€ utils/                   # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ audit.py             # å®¡è®¡æ—¥å¿—
â”‚   â”œâ”€â”€ encrypt.py           # åŠ å¯†å·¥å…·
â”‚   â”œâ”€â”€ i18n.py              # å›½é™…åŒ–
â”‚   â””â”€â”€ notifier.py          # å‘Šè­¦ç³»ç»Ÿ
â”œâ”€â”€ ui/                      # å‰ç«¯ Electron + React
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main/            # Electron ä¸»è¿›ç¨‹
â”‚       â””â”€â”€ renderer/        # React æ¸²æŸ“è¿›ç¨‹
â”‚           â”œâ”€â”€ components/  # UI ç»„ä»¶
â”‚           â”œâ”€â”€ stores/      # Zustand çŠ¶æ€ç®¡ç†
â”‚           â”œâ”€â”€ services/    # WebSocket æœåŠ¡
â”‚           â”œâ”€â”€ i18n/        # å›½é™…åŒ–
â”‚           â””â”€â”€ types/       # TypeScript ç±»å‹
â”œâ”€â”€ tests/                   # Python æµ‹è¯•
â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â””â”€â”€ database/                # æ•°æ®å­˜å‚¨
```

---

## ç‰ˆæœ¬ä¿¡æ¯

- Python: 3.10+
- Node.js: 18+
- Electron: 28
- React: 18
- TypeScript: 5.3
- Zustand: 4.4
